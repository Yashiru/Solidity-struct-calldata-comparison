# Solidity struct calldata comparison

## With struct

With this function as code base:

```solidity
function withStruct(Params calldata _p) public {
    p = _p;
}
```

if we call it as: 

``` solidity
string[] memory p6 = new string[](2);

p6[0] = "test1";
p6[1] = "test2";

testStruct.withStruct(
    Params({
        p1: uint128(9),
        p2: uint128(10),
        p3: bytes32(uint256(11)),
        p4: true,
        p5: "test",
        p6: p6
    })
);
```

Provided calldata are (1024 bytes):

```bytes
0x00000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000009000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000b000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000c00000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000474657374000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000005746573743100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000057465737432000000000000000000000000000000000000000000000000000000
```

### Gas report
| src/TestStruct.sol:TestStruct contract |                 |        |        |        |         |
|----------------------------------------|-----------------|--------|--------|--------|---------|
| Deployment Cost                        | Deployment Size |        |        |        |         |
| 476511                                 | 2412            |        |        |        |         |
| Function Name                          | min             | avg    | median | max    | # calls |
| withStruct                             | 157729          | 157729 | 157729 | 157729 | 1       |



## Without struct

With this function as code base:

```solidity
function withoutStruct(
    uint128 _p1,
    uint128 _p2,
    bytes32 _p3,
    bool _p4,
    string calldata _p5,
    string[] calldata _p6
) public {
    p = Params({p1: _p1, p2: _p2, p3: _p3, p4: _p4, p5: _p5, p6: _p6});
}
```

if we call it as: 

``` solidity
string[] memory p6 = new string[](2);

p6[0] = "test1";
p6[1] = "test2";

testStruct.withoutStruct(
    uint128(9),
    uint128(10),
    bytes32(uint256(11)),
    true,
    "test",
    p6
);
```

Provided calldata are (960 bytes):

```bytes
0x0000000000000000000000000000000000000000000000000000000000000009000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000b000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000c00000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000474657374000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000005746573743100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000057465737432000000000000000000000000000000000000000000000000000000
```

### Gas report
| src/TestStruct.sol:TestStruct contract |                 |        |        |        |         |
|----------------------------------------|-----------------|--------|--------|--------|---------|
| Deployment Cost                        | Deployment Size |        |        |        |         |
| 476511                                 | 2412            |        |        |        |         |
| Function Name                          | min             | avg    | median | max    | # calls |
| withoutStruct                          | 158837          | 158837 | 158837 | 158837 | 1       |


## Run it by your own

### Install foundry

See [foundry installation guide](https://book.getfoundry.sh/getting-started/installation) for more info.

```bash
curl -L https://foundry.paradigm.xyz | bash
```

### Run test with logs and debug

```bash
forge test --gas-report -vvvv
```